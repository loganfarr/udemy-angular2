<h1>{{ pageTitle }}</h1>
<form 
  [formGroup]="form" 
  class="col-md-6 col-lg-6 well"
  (submit)="onSubmit()">
  <fieldset>
    <legend>User</legend>
    <div class="form-group">
      <label for="name">Name</label>
      <input 
        class="form-control" 
        type="text" 
        name="name" 
        id="name" 
        formControlName="name"
        [(ngModel)]="user.name" />
      <div *ngIf="form.controls.name.touched && !form.controls.name.valid">
        <div 
          *ngIf="form.controls.name.errors.required"
          class="alert alert-danger">
          Name is required.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input 
        class="form-control" 
        type="email" 
        name="email" 
        id="email" 
        formControlName="email"
        [(ngModel)]="user.email" />
      <div *ngIf="form.controls.email.touched && !form.controls.email.valid">
        <div
          *ngIf="form.controls.email.errors.required"
          class="alert alert-danger">
          Email is required.
        </div>
        <div
          *ngIf="form.controls.email.errors.validEmail && form.controls.email.value.length > 0"
          class="alert alert-danger">
          Must have a valid email.    
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="phone">Phone</label>
      <input 
        class="form-control" 
        type="text" 
        name="phone" 
        id="phone" 
        formControlName="phone"
        [(ngModel)]="user.phone" />
    </div>
  </fieldset>
  <fieldset formGroupName="address">
    <legend>Address</legend>
    <div class="form-group">
      <label for="street">Street</label>
      <input 
        class="form-control" 
        type="text" 
        name="street" 
        id="street" 
        formControlName="street"
        [(ngModel)]="user.address.street" />
    </div>
    <div class="form-group">
      <label for="suite">Suite</label>
      <input 
        class="form-control" 
        type="text" 
        name="suite" 
        id="suite" 
        formControlName="suite"
        [(ngModel)]="user.address.suite" />
    </div>
    <div class="form-group">
      <label for="city">City</label>
      <input 
        class="form-control" 
        type="text" 
        name="city" 
        id="city" 
        formControlName="city"
        [(ngModel)]="user.address.city" />
    </div>
    <div class="form-group">
      <label for="zipcode">Zip Code</label>
      <input 
        class="form-control" 
        type="text" 
        name="zipcode" 
        id="zipcode" 
        formControlName="zipCode"
        [(ngModel)]="user.address.zipcode" />
    </div>
  </fieldset>

  <button type="submit" class="btn btn-primary" [disabled]="!form.valid">Add User</button>
</form>